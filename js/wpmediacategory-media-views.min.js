window.wp=window.wp||{};(function(a){var b=wp.media;b.view.AttachmentFilters.Taxonomy=b.view.AttachmentFilters.extend({tagName:"select",createFilters:function(){var e={};var d=this;_.each(d.options.termList||{},function(g,f){var h=g.term_id;var i=a("<div/>").html(g.term_name).text();e[h]={text:i,priority:f+2};e[h]["props"]={};e[h]["props"][d.options.taxonomy]=h});e.all={text:d.options.termListTitle,priority:1};e.all["props"]={};e.all["props"][d.options.taxonomy]=null;this.filters=e}});var c=b.view.AttachmentsBrowser;b.view.AttachmentsBrowser=b.view.AttachmentsBrowser.extend({createToolbar:function(){var f=this.options.filters;c.prototype.createToolbar.apply(this,arguments);var e=this,d=1;a.each(wpmediacategory_taxonomies,function(g,h){if(h.term_list&&f){e.toolbar.set(g+"-filter",new b.view.AttachmentFilters.Taxonomy({controller:e.controller,model:e.collection.props,priority:-80+10*d++,taxonomy:g,termList:h.term_list,termListTitle:h.list_title,className:"attachment-"+g+"-filter"}).render())}})}})})(jQuery);